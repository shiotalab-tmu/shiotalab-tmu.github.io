---
import Layout from '../layouts/Layout.astro';
import PageHero from '../components/PageHero.astro';
import { getEntry } from 'astro:content';

const memberList = await getEntry('memberlist', 'index');
if (!memberList) {
  throw new Error('memberlist entry not found');
}
const { faculty, students, alumni } = memberList.data;
---

<Layout title="メンバー">
  <PageHero
    title="メンバー"
    titleEn="MEMBERS"
    subtitle="メンバー"
    image="images/sub_members@2x.jpg"
  />

  <section class="content-section">
    <div class="container">

      {faculty.length > 0 && (
        <div class="member-section">
          <h2>教員・職員</h2>
          <div class="member-list-faculty">
            {faculty.map((member) => (
              <div class="faculty-item">
                <span class="role-label">{member.role}</span>
                <a href={`members/${member.slug}/`} class="name-jp-link">{member.name}</a>
                <span class="name-en">{member.nameEn || ''}</span>
                <span class="position">
                  {member.roleEn} {member.nameEn || member.name}
                </span>
                <span class="status">{member.role}</span>
              </div>
            ))}
          </div>
        </div>
      )}

      {students.map((studentGroup) => (
        <div class="member-section">
          <h2>{studentGroup.section}</h2>
          <div class="member-list-simple">
            {studentGroup.members.map((member) => (
              <div class="student-item">
                <span class="student-id">{member.year}</span>
                <span class="student-name">{member.name}</span>
                <span class="student-name-en">{member.nameEn || ''}</span>
              </div>
            ))}
          </div>
        </div>
      ))}

      {alumni.length > 0 && (
        <div class="member-section">
          <h2>博士号取得者</h2>
          <p class="note">教員・卒業生グループへの就職実績と研究分野で博士号を取得した人材を就職先の情報で</p>
          <div class="member-list-simple">
            {alumni.map((member) => (
              <div class="alumni-item">
                <span class="alumni-name">{member.name}</span>
                <a href={member.url} target="_blank" class="alumni-affiliation">{member.affiliation}</a>
              </div>
            ))}
          </div>
        </div>
      )}

    </div>
  </section>
</Layout>

<style>
  .content-section {
    padding: 80px 0;
  }

  .member-section {
    margin-bottom: 60px;
  }

  .member-section h2 {
    font-size: 1.5rem;
    color: var(--text-dark);
    margin-bottom: 20px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--primary-color);
  }

  .member-list-faculty {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .faculty-item {
    display: grid;
    grid-template-columns: 80px 150px 200px 1fr auto;
    gap: 15px;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #f0f0f0;
    font-size: 0.9rem;
  }

  .role-label {
    color: var(--text-dark);
    font-weight: 500;
  }

  .name-jp {
    color: var(--text-dark);
    font-weight: 500;
  }

  .name-en {
    color: var(--text-light);
    font-style: italic;
  }

  .position {
    color: var(--text-light);
    font-size: 0.85rem;
  }

  .status {
    color: var(--primary-color);
    font-size: 0.85rem;
  }

  .member-list-simple {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .student-item {
    display: grid;
    grid-template-columns: 40px 150px 200px;
    gap: 15px;
    align-items: center;
    padding: 8px 0;
    font-size: 0.9rem;
  }

  .student-id {
    color: var(--primary-color);
    font-weight: 500;
  }

  .student-name {
    color: var(--text-dark);
  }

  .student-name-en {
    color: var(--text-light);
    font-style: italic;
    font-size: 0.85rem;
  }

  .note {
    color: var(--text-light);
    font-size: 0.9rem;
    margin-bottom: 20px;
    line-height: 1.6;
  }

  .alumni-item {
    display: grid;
    grid-template-columns: 150px 1fr;
    gap: 15px;
    align-items: center;
    padding: 8px 0;
    font-size: 0.9rem;
  }

  .alumni-name {
    color: var(--text-dark);
    font-weight: 500;
  }

  .alumni-affiliation {
    color: var(--primary-color);
    font-size: 0.9rem;
    text-decoration: none;
  }

  .alumni-affiliation:hover {
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .page-hero {
      height: 200px;
    }

    .hero-content h1 {
      font-size: 2rem;
    }

    .faculty-item {
      grid-template-columns: 1fr;
      gap: 8px;
      text-align: left;
    }

    .student-item {
      grid-template-columns: 1fr;
      gap: 5px;
    }

    .alumni-item {
      grid-template-columns: 1fr;
      gap: 5px;
    }
  }
</style>
